<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Free scenarios for role playing games from different authors">
    <meta name="keywords" content="Scenarios, Dungeons & Dragons, Role Playing Games">
    <meta name="author" content="Lev Kobelev">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Scenarios & Shots</title>
    <link rel="icon" href="../img/icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- My Own Styles-->
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/light.css" media="(prefers-color-scheme: light)">
    <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
</head>

<body class="d-flex flex-column min-vh-100">

<!-- Sprite -->
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none">
    <!-- Filtering Icon -->
    <symbol id="filter" viewBox="0 0 16 16">
        <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2z"/>
    </symbol>

    <!-- Search Icon -->
    <symbol id="search" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
    </symbol>

    <!-- Random Icon -->
    <symbol id="random" viewBox="0 0 16 16">
        <path d="M3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3zm1 5.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm8 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm1.5 6.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM12 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM4 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
    </symbol>

    <!-- Like Icon -->
    <symbol id="like" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
    </symbol>

    <!-- List -->
    <symbol id="list" viewBox="0 0 16 16">
        <path d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
    </symbol>

    <!-- Mail -->
    <symbol id="mail" viewBox="0 0 16 16">
        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
    </symbol>

    <!-- Lock -->
    <symbol id="lock" viewBox="0 0 16 16">
        <path d="M0 8a4 4 0 0 1 7.465-2H14a.5.5 0 0 1 .354.146l1.5 1.5a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0L13 9.207l-.646.647a.5.5 0 0 1-.708 0L11 9.207l-.646.647a.5.5 0 0 1-.708 0L9 9.207l-.646.647A.5.5 0 0 1 8 10h-.535A4 4 0 0 1 0 8zm4-3a3 3 0 1 0 2.712 4.285A.5.5 0 0 1 7.163 9h.63l.853-.854a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.793-.793-1-1h-6.63a.5.5 0 0 1-.451-.285A3 3 0 0 0 4 5z"/>
        <path d="M4 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
    </symbol>

    <!-- User -->
    <symbol id="user" viewBox="0 0 16 16">
        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"/>
    </symbol>

    <!-- Descending -->
    <symbol id="s-desc" viewBox="0 0 16 16">
        <path d="M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293V2.5zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"/>
    </symbol>

    <!-- Ascending -->
    <symbol id="s-asc" viewBox="0 0 16 16">
        <path d="M3.5 3.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 12.293V3.5zm4 .5a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1h-1zm0 3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1h-3zm0 3a.5.5 0 0 1 0-1h5a.5.5 0 0 1 0 1h-5zM7 12.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5z"/>
    </symbol>
</svg>

<!-- Header -->
<header class="header sticky-top">
    <!-- Sticky Navbar -->
    <nav class="navbar navbar-expand-md px-3 py-2 container-fluid">
        <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContentMobile" aria-controls="navbarSupportedContentMobile"
                aria-expanded="false" aria-label="Toggle navigation">
            <svg class="icon">
                <use xlink:href="#list"></use>
            </svg>
        </button>
        <!-- Main Navigation -->
        <div class="col-4 collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto my-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Scenarios</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Articles</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About</a>
                </li>
            </ul>
        </div>
        <!-- Search Bar -->
        <div class="col-12 col-sm-6 col-md-4 d-none d-sm-flex align-items-center">
            <label class="pe-2" for="searchBar">Search:</label>
            <input class="form-control" type="search" placeholder="type here..."
                   aria-label="Search" id="searchBar">
        </div>
        <!-- Sign Up and Log In -->
        <div class="col-8 col-sm-4 d-flex justify-content-end invisible-login">
            <div class="text-center">
                <form>
                    <button type="button" class="btn btn-sm rounded-pill btn-outline-primary mx-1"
                            data-bs-toggle="modal" data-bs-target="#signUp">Sign Up
                    </button>
                </form>
            </div>
            <div class="text-center">
                <form>
                    <button type="button" class="btn btn-sm rounded-pill btn-primary mx-1"
                            data-bs-toggle="modal" data-bs-target="#logIn">Log In
                    </button>
                </form>
            </div>
        </div>
        <!-- Profile -->
        <div class="col-8 col-sm-4 d-flex justify-content-end visible-login-only">
            <div class="btn-group">
                <div class="dropdown">
                    <button id='usernameText' class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><button class="dropdown-item" href="profile.html">Profile</button></li>
                        <li><button class="dropdown-item" href="#">Settings</button></li>
                        <li><button class="dropdown-item" onclick="logout()">Sing Out</button></li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Mobile Navigation -->
        <div class="col-4 collapse" id="navbarSupportedContentMobile">
            <ul class="navbar-nav me-auto my-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Scenarios</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Articles</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<!-- Main -->
<main class="main">
    <!-- Sign Up Popup -->
    <div class="modal fade" id="signUp" tabindex="-1" aria-labelledby="signUpLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center container-fluid" id="signUpLabel">Sign Up</h5>
                </div>
                <div class="modal-body">
                    <form onsubmit="signup(event)">
                        <!-- Email input -->
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="emailSignUp" placeholder="email@mail.ru">
                            <label for="emailSignUp">
                                <svg class="icon">
                                    <use xlink:href="#mail"></use>
                                </svg>
                                Email address
                            </label>
                        </div>

                        <!-- Username input -->
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="usernameSignUo" placeholder="username">
                            <label for="usernameSignUo">
                                <svg class="icon">
                                    <use xlink:href="#user"></use>
                                </svg>
                                Username
                            </label>
                        </div>

                        <!-- Password input -->
                        <div class="form-floating mb-3">
                            <input type="password" class="form-control" id="passwordSignUp"
                                   placeholder="password">
                            <label for="passwordSignUp">
                                <svg class="icon">
                                    <use xlink:href="#lock"></use>
                                </svg>
                                Password
                            </label>
                        </div>

                        <!-- Submit button -->
                        <div class="text-center mb-4">
                            <button type="submit" class="btn btn-primary btn-block mb-4">Sign Up</button>
                            <p>Already have an account? <a href="#logIn" data-bs-dismiss="modal" data-bs-toggle="modal"
                                                           data-target="#logIn">Log In</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Log In Popup -->
    <div class="modal fade" id="logIn" tabindex="-1" aria-labelledby="logInpLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center container-fluid" id="logInpLabel">Log In</h5>
                </div>
                <div class="modal-body">
                    <form onsubmit="login(event)">
                        <!-- Email input -->
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="emailLogIn" name="email"
                                   placeholder="email@mail.ru">
                            <label for="emailLogIn">
                                <svg class="icon">
                                    <use xlink:href="#mail"></use>
                                </svg>
                                Email address
                            </label>
                        </div>
                        <!-- Password input -->
                        <div class="form-floating mb-3">
                            <input type="password" class="form-control" id="passwordLogIn" name="password"
                                   placeholder="password">
                            <label for="passwordLogIn">
                                <svg class="icon">
                                    <use xlink:href="#lock"></use>
                                </svg>
                                Password
                            </label>
                        </div>
                        <div class="row mb-4">
                            <div class="col d-flex justify-content-center">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="rememberMe" checked>
                                    <label class="form-check-label" for="rememberMe"> Remember me </label>
                                </div>
                            </div>
                            <div class="col">
                                <a href="#">Forgot password?</a>
                            </div>
                        </div>
                        <!-- Submit button -->
                        <div class="text-center mb-4">
                            <button type="submit" class="btn btn-primary btn-block mb-4">Log In</button>
                            <p>Don't have an account? <a href="#signUp" data-bs-dismiss="modal" data-bs-toggle="modal"
                                                         data-target="#signUp">Sign Up</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Content -->
    <!-- Tabs -->
    <div class="container-fluid mt-2 mb-1 px-3 px-sm-3 px-md-4 px-lg-5">
        <div class="d-flex justify-content-between justify-md-content-start justify-lg-content-between">
            <div class="btn-group visible-login-only" role="group" aria-label="scenarios tabs" id="scenariosTabs">
                <input type="radio" class="btn-check"  value="all" name="scenariosTabs" id="btnScenariosAll" autocomplete="off" checked onclick="search()">
                <label class="btn btn-outline-primary" for="btnScenariosAll">All</label>

                <input type="radio" class="btn-check" value="liked" name="scenariosTabs" id="btnScenariosLiked" autocomplete="off" onclick="search()">
                <label class="btn btn-outline-primary" for="btnScenariosLiked">Liked</label>

                <input type="radio" class="btn-check" value="published" name="scenariosTabs" id="btnScenariosPublished" autocomplete="off" onclick="search()">
                <label class="btn btn-outline-primary" for="btnScenariosPublished">Published</label>
            </div>
            <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSorting"
                    aria-expanded="false" aria-controls="collapseSorting" aria-label="collapse sorting">
                <svg class="icon">
                    <use xlink:href="#filter"></use>
                    <title>Filter</title>
                </svg>
            </button>
        </div>
        <hr>
    </div>
    <!-- Sorting & Filtering -->
    <div class="collapse" id="collapseSorting">
        <div class="container-fluid px-3 px-sm-3 px-md-4 px-lg-5">
            <div class="row">
                <!-- Sorting -->
                <div class="col-6 col-sm-6 col-md-4 col-lg-2 d-flex flex-column">
                    <p class="mb-1"><b>Sort</b></p>
                    <div class="btn-group-vertical my-1" role="group"
                         aria-label="Button group with nested dropdown">
                        <div class="container-fluid m-0 p-0">
                            <input type="radio" class="btn-check custom-control-input w-100" name="sortingOption" id="sortingName" value="name" autocomplete="off" checked>
                            <label class="btn btn-outline-primary custom-control-label w-100" for="sortingName">Name</label>
                        </div>
                        <div class="container-fluid my-1 p-0">
                            <input type="radio" class="btn-check custom-control-input w-100" name="sortingOption" id="sortingLikes" value="likes" autocomplete="off">
                            <label class="btn btn-outline-primary custom-control-label w-100" for="sortingLikes">Likes</label>
                        </div>
                        <div class="container-fluid m-0 p-0">
                            <input type="radio" class="btn-check custom-control-input w-100" name="sortingOption" id="sortingRelease" value="release" autocomplete="off">
                            <label class="btn btn-outline-primary custom-control-label w-100" for="sortingRelease">Release</label>
                        </div>
                    </div>

                    <button id="sortingOrder" type="button" class="btn btn-light" value="asc" onclick="changeSorting(this)">
                        <svg class="icon">
                            <use xlink:href="#s-asc"></use>
                            <title>Sort</title>
                        </svg>
                        Ascending
                    </button>
                </div>
                <!-- Filtering -->
                <div class="col-6 col-sm-6 col-md-8 col-lg-10 border-start">
                    <p class="mb-1"><b>Filter</b></p>
                    <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-1">
                        <!-- Systems -->
                        <div class="col col-md-12 col-lg-3" id="gameSystems">
                            <p class="mb-1">Game Systems:</p>
                        </div>
                        <!-- Checkboxes -->
                        <div class="col col-md-12 col-lg-3">
                            <p class="mb-1">Show or not:</p>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="checkerAdultContent" checked>
                                <label class="form-check-label" for="checkerAdultContent">Adult Content</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="checkerOnlyFinished">
                                <label class="form-check-label" for="checkerOnlyFinished">Only Finished</label>
                            </div>
                        </div>
                        <!-- Container with Tags-->
                        <div class="col col-md-12 col-lg-6">
                            <p id="tagsHeader" class="mb-1">Tags (0/3):</p>
                            <div class="d-flex flex-row justify-content-between align-content-around flex-wrap h-100"
                                 id="tagsButtons">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Search and Random Buttons -->
                <div class="col-12 d-flex justify-content-between mt-3">
                    <button type="button" class="btn btn-primary" onclick="search()">
                        <svg class="icon">
                            <use xlink:href="#search"></use>
                            <title>Search</title>
                        </svg>
                        Search
                    </button>
                    <button type="button" class="btn btn-danger">
                        <svg class="icon">
                            <use xlink:href="#random"></use>
                            <title>Random Scenario</title>
                        </svg>
                        Random</button>
                </div>
            </div>
            <hr>
        </div>
    </div>
    <!-- Cards -->
    <div class="container-fluid my-3 px-3 px-sm-3 px-md-4 px-lg-5">
        <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-2" id="scenarios">
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="footer text-center text-lg-start mt-auto">
    <div class="text-center p-3">
        Lev Kobelev | Laboratory Work 2
    </div>
</footer>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<!-- My Own Scripts -->
<script src="../scripts/general.js"></script>
<script src="../scripts/auth.js"></script>
<script src="../scripts/api.js"></script>
</body>
</html>
